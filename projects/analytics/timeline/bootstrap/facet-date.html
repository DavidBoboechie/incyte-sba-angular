<div class="d-flex flex-column">
  <span *ngIf="allowCustomRange" class="pb-1 px-2 text-muted">Predefined Date Range :</span>
  <sq-facet-list #facet
      [name]="name"
      [results]="results"
      [aggregation]="aggregation"
      [showCount]="showCount"
      [allowExclude]="allowExclude"
      [allowOr]="allowOr"
      [allowAnd]="allowAnd"
      [searchable]="searchable"
      [displayEmptyDistributionIntervals]="displayEmptyDistributionIntervals"
      [showProgressBar]="showProgressBar"
      [acceptNonAggregationItemFilter]="false"
      [replaceCurrent]="replaceCurrent"
  >
  </sq-facet-list>

  <div class="d-flex py-1" *ngIf="allowCustomRange">
      <button type="button"
          class="btn px-2 py-0"
          [sqTooltip]="showCustomRange ? ('msg#facetCard.collapse' | sqMessage) : ('msg#facetCard.expand' | sqMessage)"
          (click)="showCustomRange = !showCustomRange">
          <i class="text-muted fas fa-chevron-circle-{{showCustomRange ? 'up' : 'down'}}">
          </i>
      </button>
      <span class="text-muted">Custom Date Range :</span>
  </div>

  <form [formGroup]="form" *ngIf="allowCustomRange && showCustomRange">
      <div class="d-flex flex-wrap pb-1 pt-2 px-3">
          <sq-date-range-picker
              [formControlName]="'dateRange'"
              sqAdvancedFormValidation
              [field]="'dateRange'"
              [validationForm]="form">
          </sq-date-range-picker>
      </div>
  </form>

  <sq-timeline
      *ngIf="allowCustomRange && showCustomRange"
      [data]="timeSeries"
      [selection]="selection"
      [width]="'300'"
      [height]="'300'"
      [showTooltip]="false"
      [curveType]="'curveLinear'"
      (selectionChange)="updateRange($event)">
  </sq-timeline>
</div>
