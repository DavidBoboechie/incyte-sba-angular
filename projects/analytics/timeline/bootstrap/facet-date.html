<div class="d-flex flex-column">
  <span *ngIf="allowCustomRange && allowPredefinedRange" class="pb-1 px-2 text-muted">Predefined Date Range :</span>

    <div class="d-flex flex-wrap mt-1" *ngIf="allowPredefinedRange">
        <button
            *ngFor="let item of items"
            type="button"
            class="btn btn-outline-secondary btn-sm rounded-pill date-item ms-1 mb-1"
            [ngClass]="{active: isFiltered(item)}"
            (click)="filterItem(item, $event)">
            {{item | sqValue:item.$column}}
            <span *ngIf="showCount && item.count"
            class="counter rounded-pill bg-light text-black ms-1"
            [title]="item.count + ' occurrences in document'">{{item.count}}</span>
        </button>
    </div>

  <div class="d-flex py-1" *ngIf="allowCustomRange && allowPredefinedRange">
      <button type="button"
          class="btn px-2 py-0"
          [sqTooltip]="showCustomRange ? ('msg#facetCard.collapse' | sqMessage) : ('msg#facetCard.expand' | sqMessage)"
          (click)="showCustomRange = !showCustomRange">
          <i class="text-muted fas fa-chevron-circle-{{showCustomRange ? 'up' : 'down'}}">
          </i>
      </button>
      <span class="text-muted">Custom Date Range :</span>
  </div>

  <form [formGroup]="form" *ngIf="allowCustomRange && showCustomRange">
      <div class="d-flex flex-wrap pb-1 pt-2 px-3">
          <sq-date-range-picker
              [formControlName]="'dateRange'"
              sqAdvancedFormValidation
              [field]="'dateRange'"
              [validationForm]="form">
          </sq-date-range-picker>
      </div>
  </form>

  <sq-timeline
      *ngIf="allowCustomRange && showCustomRange"
      [data]="timeSeries"
      [selection]="selection"
      [width]="'300'"
      [height]="'300'"
      [showTooltip]="false"
      [curveType]="'curveLinear'"
      (selectionChange)="updateRange($event)">
  </sq-timeline>
</div>
